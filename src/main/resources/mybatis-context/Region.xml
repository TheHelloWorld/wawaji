<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lzg.wawaji.dao.RegionDao">

    <!-- 地区表 -->
    <resultMap type="com.lzg.wawaji.entity.Region" id="regionMap">
        <!-- 主键id -->
        <id property="id" column="id" jdbcType="BIGINT"/>
        <!-- 地区编码 -->
        <result property="code" column="code" jdbcType="VARCHAR"/>
        <!-- 名称 -->
        <result property="regionName" column="region_name" jdbcType="VARCHAR"/>
        <!-- 父级地区编码 -->
        <result property="parentCode" column="parent_code" jdbcType="VARCHAR"/>
        <!-- 英文全名 -->
        <result property="fullNameEn" column="full_name_en" jdbcType="VARCHAR"/>
        <!-- 英文简写 -->
        <result property="shortNameEn" column="short_name_en" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 根据父级地区编码获得子地区 -->
    <select id="getRegionByParentCode" parameterType="java.lang.String" resultMap="regionMap">
        select code, region_name, parent_code from region  where parent_code = #{parentCode}
    </select>

    <!-- 根据父级地区编码获得子地区数量 -->
    <select id="countRegionByParentCode" parameterType="java.lang.String" resultType="java.lang.Integer">
        select count(*) from region  where parent_code = #{parentCode}
    </select>

</mapper>